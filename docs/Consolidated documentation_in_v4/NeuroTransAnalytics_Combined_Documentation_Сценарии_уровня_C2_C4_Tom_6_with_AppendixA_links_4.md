<!-- ================================================== -->
<!-- source: 12_2_C3_2_Component_Timing_Computation_v4.md -->
<!-- ================================================== -->
<a id="doc-6-12_2_c3_2_component_timing_computation_v4"></a>

# C3.2 — Расчёт компонент временной архитектуры реакции (Component Timing Computation v4)

## 1. Назначение документа

Документ описывает **вычислительные принципы и пайплайны расчёта компонент временной архитектуры зрительной реакции**
в проекте *NeuroTransAnalytics* версии v4.

Цель:

* формализовать расчёт **ΔV1**, **ΔV4** и **ΔV5/MT**;
* обеспечить воспроизводимость исторических подходов;
* допустить сосуществование альтернативных алгоритмов расчёта;
* подготовить данные для сценариев уровней A и B.

Документ **не вводит физиологических интерпретаций**, а фиксирует вычислительную дисциплину.

---

## 2. Общие вычислительные принципы

### 2.1. Принцип компонентной декомпозиции

Временная реакция RT рассматривается как:

* наблюдаемая величина;
* результат сложения и взаимодействия компонент;
* объект декомпозиции без предположения линейной причинности.

---

### 2.2. Принцип независимости от сценария

Расчёт компонент:

* выполняется **до** сценарного анализа;
* не зависит от конкретного сценария A или B;
* предоставляет универсальный слой данных.

---

### 2.3. Принцип версионности алгоритмов

Каждый алгоритм расчёта:

* имеет уникальную версию;
* фиксирует параметры фильтрации;
* может сосуществовать с другими версиями.

---

## 3. Расчёт базовой компоненты ΔV1

### 3.1. Назначение ΔV1

ΔV1 представляет собой:

* базовую сенсомоторную компоненту реакции;
* обязательную часть каждой зрительной реакции;
* точку отсчёта для расчёта производных компонент.

---

### 3.2. Исторический алгоритм расчёта

Исторически ΔV1 вычислялась:

* на основе простой зрительной реакции;
* с применением устойчивых статистик;
* с контролем выбросов (MAD-подход).

Фиксируется:

* источник данных для расчёта;
* используемый порог MAD;
* правила исключения атипичных значений.

---

## 4. Расчёт производной компоненты ΔV4

### 4.1. Логика расчёта

ΔV4 определяется как:

* разность между RT реакции на цветовой стимул
* и соответствующим значением ΔV1.

ΔV4 трактуется вычислительно как:

* остаточная временная компонента;
* устойчивая величина при повторных измерениях;
* объект сценарного анализа.

---

### 4.2. Условия корректности

Для расчёта ΔV4 требуется:

* валидное значение RT;
* корректно рассчитанная ΔV1;
* сопоставимость условий предъявления.

---

## 5. Расчёт производной компоненты ΔV5/MT

### 5.1. Логика расчёта

ΔV5/MT определяется как:

* разность между RT реакции на движение
* и соответствующим значением ΔV1.

Как и ΔV4, ΔV5/MT:

* является вычислительной производной;
* не требует априорной физиологической интерпретации.

---

### 5.2. Особенности расчёта

Учитывается:

* повышенная вариабельность;
* чувствительность к условиям теста;
* необходимость сегментарного анализа.

---

## 6. Контроль качества компонентных расчётов

QC включает:

* проверку диапазонов значений;
* устойчивость компонент по сегментам теста;
* согласованность между повторными тестами;
* выявление расчётных артефактов.

Компоненты, не прошедшие QC:

* не удаляются;
* помечаются флагами качества.

---

## 7. Хранение результатов

Результаты расчёта:

* сохраняются в сущности `ComponentTiming`;
* содержат ссылку на `StimulusEvent`;
* включают версию алгоритма и параметры фильтрации.

---

## 8. Связь с последующими уровнями

C3.2 подготавливает данные для:

* C3.3 — агрегаты и контроль качества;
* C3.4 — сценарные вычисления;
* архитектурного анализа A1–A2.

---

## 9. Ограничения и предостережения

Недопустимо:

* интерпретировать компоненты как прямые физиологические измерения;
* модифицировать алгоритмы без фиксации версии;
* использовать компоненты вне контекста условий тестирования.

---

## 10. Итоговая роль документа

C3.2 обеспечивает:

* формально корректный расчёт компонент временной архитектуры реакции;
* основу для архитектурного и сценарного анализа;
* воспроизводимость исторических и новых вычислительных подходов.

---

<!-- ================================================== -->
<!-- source: 12_3_C3_3_QC_and_Aggregation_v4.md -->
<!-- ================================================== -->
<a id="doc-7-12_3_c3_3_qc_and_aggregation_v4"></a>

# C3.3 — Контроль качества и агрегирование данных (QC & Aggregation v4)

## 1. Назначение документа

Документ описывает **принципы и вычислительные процедуры контроля качества (QC)**
и **агрегирования данных** в проекте *NeuroTransAnalytics* версии v4.

Цель:

* формально отделить контроль качества от интерпретации;
* зафиксировать допустимые и недопустимые виды агрегации;
* сохранить исследовательскую полноту данных без редукций.

C3.3 реализует переход:

> от событийного уровня и компонентных расчётов (C3.1–C3.2)
> к сценарным вычислениям (C3.4).

---

## 2. Методологическая позиция QC

Контроль качества в проекте:

* **не является очисткой данных**;
* **не направлен на улучшение статистических показателей**;
* служит для выявления границ применимости анализа.

QC отвечает на вопрос:

> *на каких данных, при каких условиях, какие вычисления допустимы.*

---

## 3. Уровни контроля качества

### 3.1. Событийный QC

Проверяется:

* корректность связки StimulusEvent ↔ ResponseEvent;
* допустимые диапазоны RT и PSI;
* наличие системных пропусков;
* логическая целостность последовательностей стимулов.

Результат:

* флаги качества на уровне событий;
* без удаления данных.

---

### 3.2. Компонентный QC (ΔV*)

Проверяется:

* вычислимость ΔV1, ΔV4, ΔV5/MT;
* устойчивость компонент по сегментам теста;
* согласованность повторных измерений.

Компоненты:

* не исключаются автоматически;
* маркируются признаками надёжности.

---

## 4. Принципы агрегирования

### 4.1. Агрегация как отдельный вычислительный слой

Агрегация:

* выполняется **только после QC**;
* не заменяет событийные данные;
* всегда воспроизводима из первичных событий.

---

### 4.2. Допустимые виды агрегатов

Допускаются:

* медианные и устойчивые оценки;
* сегментарные агрегаты (старт / середина / конец теста);
* условные агрегаты (по PSI, цвету, позиции);
* популяционные распределения.

---

### 4.3. Ограничения агрегирования

Недопустимо:

* агрегировать данные с различными условиями предъявления;
* скрывать вариабельность за одним средним;
* использовать агрегаты вне сценарного контекста.

---

## 5. Исторические и устойчивые метрики

В проекте допускается параллельное использование:

* исторически применявшихся средних и SD;
* устойчивых показателей (медиана, MAD и др.).

Требование:

* сравнение влияния разных метрик;
* явное указание используемого метода.

---

## 6. Сегментация теста

QC и агрегирование учитывают:

* позицию стимула в последовательности;
* стартовые эффекты;
* нагрузочные срывы;
* асимметрии по сегментам.

Сегментация:

* не является интерпретацией;
* служит для выявления динамики условий.

---

## 7. Хранение агрегатов и QC-метаданных

Результаты QC и агрегирования:

* сохраняются в `AggregateMetrics`;
* содержат ссылки на исходные события;
* включают параметры фильтрации и версии алгоритмов.

---

## 8. Связь с сценарным анализом

C3.3 подготавливает:

* корректные входные данные для C3.4;
* информацию о допустимости тех или иных сценариев;
* основу для интерпретации ограничений результатов.

---

## 9. Итоговая роль документа

C3.3 обеспечивает:

* методически корректный контроль качества;
* осмысленное агрегирование без потери информации;
* защиту проекта от преждевременных редукций.

---
