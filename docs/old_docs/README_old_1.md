# NeuroTransAnalytics  
## Reference Specification & Methodological Guide
Версия README.md на 1:07 08.01.2026
---

## Оглавление

1. Назначение проекта  
2. Общая концепция тестирования  
3. Описание тестов зрительных реакций  
   3.1. Tst1 — Simple Reaction  
   3.2. Tst2 — Color (Red) Reaction  
   3.3. Tst3 — Shift / Movement Reaction  
4. Обработка исключительных ситуаций  
5. Архитектура данных  
   5.1. Общая логика хранения  
   5.2. Таблица users / patients  
   5.3. Таблица trials и производные структуры  
   5.4. Метаданные тестов и параметры системы  
6. Правила расчёта реактивного времени (RT)  
7. Предобработка и фильтрация данных  
8. SQL-представления (VIEW) для аналитики  
9. Канальная и латерализационная группировка  
10. Агрегаты и аналитические показатели  
11. Python-pipeline для анализа  
12. Контроль качества данных (QC)  
13. Форматы финальных выгрузок  
14. Практический чек-лист анализа  
15. Статус документа и принципы развития

---
NeuroTransAnalytics
Reference Specification (Living Document)
0. Статус документа и область применения

Настоящий документ является reference-спецификацией проекта NeuroTransAnalytics и предназначен для:

фиксации методологических принципов тестирования скоростей зрительных реакций (СЗР);

описания структуры данных, используемой для хранения и анализа результатов;

определения формальных правил предобработки, фильтрации и агрегации данных;

обеспечения воспроизводимости аналитических процедур.

Документ не является пользовательской инструкцией и не предназначен для упрощённого ознакомления.
Он используется как рабочий методический и технический ориентир при разработке, анализе и интерпретации данных.

Документ имеет статус living specification и дополняется по мере развития проекта.
Фиксация промежуточных гипотез без формализации не допускается.

1. Назначение проекта и общие принципы

Проект NeuroTransAnalytics предназначен для систематического анализа данных тестирования скоростей зрительных реакций, полученных в рамках длительных наблюдений.

Основные задачи проекта:

формализация структуры первичных данных тестирования;

корректная обработка реактивного времени (RT) с учётом типа теста;

реализация непараметрического аналитического подхода;

обеспечение возможности внутриличностного и лонгитюдинного анализа;

подготовка данных для последующей автоматизированной интерпретации.

Принципиальные положения:

приоритет внутриличностного анализа над межгрупповым;

отказ от предположений о нормальности распределений;

обязательная регистрация артефактов, повторов и исключительных ситуаций;

разделение моторного и зрительного вкладов на уровне анализа, а не на уровне исходных данных.

2. Общая концепция тестирования СЗР

Тестирование основано на регистрации времени реакции (RT, мс) в ответ на визуальные стимулы, предъявляемые по строго заданным сценариям.

Ключевые определения:

Тест — набор попыток одного типа (Tst1, Tst2, Tst3).

Попытка (trial) — единичное предъявление стимула с регистрацией реакции.

Сессия тестирования — совокупность тестов, выполненных одним пациентом за один визит.

Общие свойства тестирования:

каждая попытка имеет чётко определённые временные метки;

структура тестов фиксирована и не адаптивна в рамках одной попытки;

обработка данных строится на уровне попыток, а не усреднённых значений.

3. Описание тестов зрительных реакций
3.1. Tst1 — Simple visual reaction

Тест представляет собой простую зрительно-моторную реакцию.

Характеристики:

одиночный визуальный стимул;

фиксированный предстимульный интервал (ISI);

реакция регистрируется нажатием кнопки.

RT определяется как разность между моментом появления стимула и моментом реакции.

Назначение теста — оценка базовой скорости зрительно-моторной реакции.

3.2. Tst2 — Color (red) visual reaction

Тест основан на предъявлении цветового стимула (красный круг) в условиях предваряющей стимуляции.

Характеристики:

предтестовые стимулы организованы в тройки;

тестовый стимул — красный круг;

ISI формируется последовательностью троек предтестовых стимулов;

регистрация реакции аналогична Tst1.

RT определяется относительно момента появления красного круга.

Тест используется для оценки реакции на цветовой стимул в условиях повышенной когнитивной нагрузки.

3.3. Tst3 — Shift / movement reaction

Тест основан на регистрации реакции на движение стимула.

Характеристики:

динамическая последовательность;

тестовый круг смещается;

реакция регистрируется нажатием кнопки.

RT определяется как разность между моментом начала движения стимула и моментом реакции.

Тест используется для оценки реакции на движение и перераспределение внимания.

### Методологическое примечание

Последовательность из трёх зрительных тестов
(простая реакция, реакция на цвет, реакция на сдвиг)
используется как функциональная схема,
позволяющая сопоставлять реакции в условиях различной
сенсорной и перцептивной нагрузки.

Любые интерпретации, связанные с вовлечением нейромедиаторных систем,
рассматриваются как гипотетические
и находятся за пределами прямых измерений,
предоставляемых текущими данными.

4. Правила регистрации и обработки событий

Для каждой попытки регистрируются временные метки, включая:

момент предъявления стимула;

момент начала движения (для Tst3);

момент реакции.

4.1. Преждевременные реакции

Если реакция происходит ранее допустимого минимального времени (MinRedLight):

попытка считается преждевременной;

RT не используется в анализе;

попытка повторяется;

факт повтора и причина фиксируются явно.

4.2. Запоздалые реакции и пропуски

Если реакция происходит позже допустимого максимального времени (MaxRedLight) либо отсутствует:

попытка считается пропущенной;

непосредственно по ходу тестирования предлагается повтор данной попытки со всеми её атрибутами, включая:

предстимульный интервал,

локализацию стимула на экране,

цвет стимула,

прочие параметры предъявления;

число повторных предъявлений не ограничено;

результат повторной попытки заносится в базу данных на место пропущенного значения;

причина пропуска не фиксируется, поскольку объективно неизвестна
(отвлёкся, утрата внимания, кратковременное нарушение сознания и т. п.).

4.3. Повторы попыток

Повторы попыток допускаются только по формальным причинам:

преждевременная реакция;

пропуск реакции.

Каждый повтор:

логируется на уровне проведения теста;

не вносится в базу данных как отдельная запись;

не имеет явного указания причины в структуре данных.
5. Источники данных и legacy-структуры

Данный раздел описывает фактические источники данных, используемые в проекте NeuroTransAnalytics, а также ограничения, связанные с историческим форматом хранения и многоформатным экспортом из базы данных Access.

Раздел принципиально фиксирует реальное происхождение данных, поскольку это напрямую влияет на логику чтения, сопоставления и анализа.

5.1. Таблица users (Access / XLSX / CSV)

Таблица users представляет собой паспортно-демографическую таблицу, сформированную в базе данных Access и сохранённую в нескольких форматах в ходе эксплуатации и последующей миграции данных.

Форматы хранения

Таблица users существует в следующих вариантах:

users.xlsx

users.csv

users_csv.csv

как часть базы данных testbase.mdb (Access)

Назначение таблицы

идентификация пациентов;

связь с результатами тестирования;

хранение минимального набора демографических атрибутов.

Таблица не содержит данных тестирования и используется исключительно как справочная.

Структурные особенности и различия форматов

в форматах users.xlsx, users.csv, users_csv.csv присутствует колонка Gender;

колонка Gender добавлена вручную и отсутствует в версии таблицы users, находящейся в составе файла testbase.mdb;

остальные поля в целом совпадают по смыслу, но могут отличаться:

порядком следования,

типами данных,

наличием пустых значений.

Типовые поля

ID — уникальный идентификатор пациента;

FName, SName, LName — имя, отчество, фамилия;

YBorn — год рождения;

Gender — пол (отсутствует в testbase.mdb);

RegDate — дата регистрации;

Active — флаг активности.

Ограничения

структура отражает формат Access и последующие ручные правки;

исторические изменения записей не отслеживаются;

таблица используется только как источник идентификаторов и демографических атрибутов;

различия между форматами должны учитываться при загрузке данных.

5.2. Таблица boxbase (Access / CSV)

Таблица boxbase содержит первичные результаты тестирования скоростей зрительных реакций и является основным legacy-источником экспериментальных данных.

Форматы и источники хранения

Таблица boxbase существует в следующих вариантах:

boxbase_csv.csv

boxbase.csv

как часть базы данных testbase.mdb (Access)

⚠️ Это принципиально важно, поскольку в частично реализованном проекте чтение данных производится из разных файлов и форматов, а не из одного «эталонного» источника.

Общая характеристика

каждая строка таблицы соответствует одной завершённой сессии тестирования одного пациента;

таблица имеет широкий (wide) формат;

значения реактивного времени представлены в виде отдельных полей.

Структурные особенности

для каждого теста (Tst1, Tst2, Tst3) предусмотрены отдельные серии значений;

каждый тест в серии содержит 36 попыток;

поля именованы по шаблону, отражающему:

тип теста;

номер попытки внутри серии.

Принципиальные свойства данных

таблица не хранит историю повторов попыток;

в таблице присутствует только финальный результат, полученный после возможных повторных предъявлений;

пропущенные реакции в таблице отсутствуют:

они заменяются непосредственно по ходу тестирования
повторным предъявлением аналогичных стимулов в аналогичных условиях;

в таблице может быть зафиксировано только количество пропусков, если они имели место в ходе тестирования;

отдельные записи о пропущенных попытках отсутствуют.

Методологические следствия

невозможна реконструкция хода повторов;

невозможна идентификация причин пропусков;

анализ опирается исключительно на финально зарегистрированные значения RT.

5.3. Принципы работы с legacy-данными

Legacy-структуры (users, boxbase) обладают следующими фундаментальными свойствами:

отражают реальный исторический формат данных, а не аналитическую модель;

сформированы в рамках конкретной реализации Access;

часть информации о ходе тестирования утрачена на уровне хранения;

между форматами (mdb, csv, xlsx) возможны структурные различия.

Следствия:

любые загрузчики данных обязаны учитывать источник и формат;

аналитическая модель не может «достраивать» отсутствующие данные;

интерпретации ограничиваются строго тем, что присутствует в таблицах.

6. Целевая архитектура базы данных

Целевая структура базы данных описана в файле schema.sql и представляет собой проектную аналитическую модель, предназначенную для систематической обработки и интерпретации данных.

Важно:

целевая схема не является копией legacy-базы;

она предназначена для формализации анализа, а не для восстановления истории тестирования.

6.1. Общая логика схемы (schema.sql)

Целевая схема разделяет данные на следующие логические уровни:

идентификация пациента;

сессии тестирования;

результаты тестов;

метаданные и параметры системы;

аналитические и интерпретационные результаты.

Для хранения агрегированных и производных данных используются JSON-поля.

6.2. Таблицы пациентов и сессий
Таблица patients

Используется как нормализованное представление пациента и логическая замена legacy-таблицы users.

Таблица testing_sessions

Используется для фиксации факта проведения тестирования и группировки тестов по визитам.

6.3. Таблицы визуальных тестов
Таблица visual_tests

Предназначена для хранения результатов визуальных тестов (Tst1, Tst2, Tst3) в структурированном виде.

одна запись соответствует одному тесту в рамках одной сессии;

допускается хранение первичных и вычисленных показателей в JSON-формате.

Таблица motor_tests

Таблица зарезервирована для моторных тестов.

⚠️ В текущем наборе данных моторные тесты отсутствуют.
Данное положение зафиксировано явно во избежание некорректных интерпретаций.

6.4. Таблицы метаданных и параметров системы
test_metadata

#### Примечание о метаданных тестирования

Все параметры предъявления стимулов (цвет, позиция, предстимульный интервал,
структура серий, параметры смещения и иные характеристики стимулов)
формализованы и хранятся отдельно в модуле `core/test_metadata.py`.

README.md намеренно не дублирует эти таблицы и перечни значений.
Метаданные рассматриваются как операциональный слой,
необходимый для воспроизводимого анализа,
но не как часть методической спецификации.

Любые изменения параметров стимулов фиксируются в метаданных,
а не в данном документе.

Содержит параметры стимулов и конфигурации тестов, необходимые для корректной интерпретации RT.

testing_system_parameters

Содержит глобальные параметры системы тестирования в формате ключ – значение.

6.5. Таблицы аналитических результатов
analysis_results

Используется для хранения агрегированных показателей и результатов статистической обработки.

6.6. Лонгитюдинные и интерпретационные таблицы
longitudinal_analysis

Предназначена для анализа изменений между разными сессиями одного пациента.

research_insights

Используется для хранения формализованных аналитических выводов.

7. Формальные определения и расчёт реактивного времени (RT)

Данный раздел фиксирует формальные определения реактивного времени (RT) для различных типов тестов, а также допустимые и недопустимые значения, исходя из реальной логики проведения тестирования и структуры данных.

7.1. Общие определения

Реактивное время (RT) — интервал времени (в миллисекундах) между заданным моментом предъявления стимула и моментом регистрации моторного ответа (нажатия).

RT рассчитывается индивидуально для каждой попытки и является базовой величиной для последующего анализа.

7.2. Определение RT для различных типов тестов
7.2.1. Tst1 — Simple visual reaction

Для теста Tst1 реактивное время определяется как:

RT = response_timestamp − stimulus_timestamp

где:

stimulus_timestamp — момент появления визуального стимула;

response_timestamp — момент нажатия кнопки.

7.2.2. Tst2 — Color (red) visual reaction

Для теста Tst2 реактивное время определяется аналогично Tst1:

RT = response_timestamp − stimulus_timestamp

Момент stimulus_timestamp соответствует появлению тестового красного круга, а не предтестовых стимулов.

7.2.3. Tst3 — Shift / movement reaction

Для теста Tst3 реактивное время определяется как:

RT = response_timestamp − movement_onset_timestamp

где:

movement_onset_timestamp — момент начала движения тестового стимула;

response_timestamp — момент нажатия кнопки.

7.3. Допустимые и недопустимые значения RT

Для всех типов тестов применяются следующие правила:

RT < 0 — недопустимое значение, отражающее артефакт регистрации;

RT < MinRedLight — преждевременная реакция;

RT > MaxRedLight — запоздалая реакция;

отсутствие реакции в допустимом интервале — пропуск.

Недопустимые значения RT не подлежат аналитическому использованию.


8. Предобработка данных

Данный раздел описывает фактическую логику формирования аналитического набора данных, исходя из реального процесса тестирования и структуры сохранённых данных.

8.1. Преждевременные реакции

Если реакция регистрируется ранее минимально допустимого времени (MinRedLight):

попытка признаётся преждевременной;

её результат не используется;

непосредственно по ходу тестирования предлагается повтор данной попытки;

повторное предъявление выполняется с теми же атрибутами стимула, включая:

предстимульный интервал,

локализацию на экране,

цвет и тип стимула;

в базу данных заносится только результат успешной повторной попытки.

Дополнительно:

в базу данных заносится число преждевременных попыток в каждом тесте серии;

позиции, временные значения и порядок преждевременных попыток не фиксируются;

информация о том, на какой именно попытке в серии произошло преждевременное нажатие, утрачена.

8.2. Запоздалые реакции и пропуски

Если реакция происходит позже допустимого максимального времени (MaxRedLight) либо отсутствует:

попытка считается пропущенной;

непосредственно по ходу тестирования предлагается повтор данной попытки;

повтор выполняется в идентичных условиях, включая:

тот же предстимульный интервал,

ту же локализацию стимула,

тот же цвет и тип стимула;

число повторных предъявлений не ограничено;

результат успешной повторной попытки заносится в базу данных на место пропущенного;

причина пропуска не фиксируется и в данных отсутствует.

Дополнительно:

в базу данных заносится число пропусков в каждом тесте серии;

позиции пропущенных попыток, их порядок и временные параметры не сохраняются;

отдельные записи о пропущенных реакциях отсутствуют.

8.3. Итоговое формирование значений RT

Следствием описанной логики тестирования и хранения данных является следующее:

в таблицах хранения присутствуют только финальные значения RT, полученные после возможных повторных предъявлений;

пропущенные и преждевременные реакции не представлены отдельными записями;

история повторов утрачена на уровне данных;

имеются сведения только о количестве пропущенных и преждевременных попыток в каждом тесте;

каждая сохранённая величина RT рассматривается как валидная попытка, прошедшая встроенный в тест механизм контроля.

Таким образом:

этап предобработки не включает выбор между несколькими попытками,
поскольку такой выбор уже был выполнен в процессе тестирования, а не на этапе анализа.

8.4. Методологические ограничения предобработки

Исходя из структуры данных и способа их формирования:

невозможно реконструировать:

число повторов конкретной попытки;

причины повторов;

точную позицию пропусков и преждевременных реакций в серии.

Особенности анализа последовательности попыток:

проблематично использовать критерии, основанные на анализе временной последовательности попыток внутри теста при большом количестве пропусков, поскольку временной ряд нарушается;

такой анализ возможен:

при отсутствии пропусков;

при наличии только преждевременных нажатий, поскольку они не нарушают временную структуру ряда, а лишь увеличивают число повторных предъявлений.

В общем случае анализ ограничивается:

статистической обработкой финальных значений RT;

использованием агрегированных показателей;

учётом числа пропусков и преждевременных реакций как дополнительных, но не временных характеристик теста.

9. SQL-представления (VIEW) и аналитические агрегаты

Данный раздел описывает рекомендуемые SQL-представления и агрегаты, предназначенные для аналитической обработки данных тестирования скоростей зрительных реакций.

Все представления строятся исключительно на финальных значениях RT, с учётом агрегированных счётчиков пропусков и преждевременных реакций, без попыток реконструкции истории повторов.

9.1. Общие принципы построения VIEW

При построении аналитических представлений принимаются следующие принципы:

используются только финальные значения RT, сохранённые в таблицах;

счётчики:

пропусков,

преждевременных реакций
рассматриваются как агрегированные атрибуты теста, а не как временные события;

отсутствуют попытки:

восстановить порядок попыток,

анализировать «истинную» длину серии,

реконструировать причины повторов.

9.2. Представление trials_with_rt

Цель представления — формирование унифицированного уровня доступа к RT для всех типов тестов.

Назначение

приведение расчёта RT к единому виду;

исключение недопустимых значений;

подготовка данных для последующих агрегатов.

Логика формирования

В представление включаются:

идентификатор пациента;

идентификатор сессии;

тип теста (Tst1, Tst2, Tst3);

номер попытки (в рамках финальной серии);

значение RT (в мс);

счётчики:

missed_count,

premature_count.

RT вычисляется в соответствии с формальными правилами (см. раздел 7).

Недопустимые значения RT (отрицательные, выходящие за пределы допустимых интервалов) исключаются.

9.3. Представление preferred_attempts

Поскольку выбор между повторными попытками был выполнен в ходе тестирования, данное представление выполняет функцию фиксации валидных данных, а не отбора.

Назначение

явное указание на то, что каждая строка соответствует принятой попытке;

устранение двусмысленности при дальнейших расчётах.

Логика

каждая запись из trials_with_rt считается валидной;

дополнительных критериев выбора не применяется;

счётчики пропусков и преждевременных реакций сохраняются как сопутствующие атрибуты.

9.4. Представление clean_trials

clean_trials является основным аналитическим представлением, используемым для расчёта статистических показателей.

Назначение

единый источник данных для статистического анализа;

обеспечение воспроизводимости аналитических процедур.

Состав полей

Типовой набор полей:

patient_id

session_id

test_type

trial_index

RT_ms

missed_count

premature_count

Дополнительно могут включаться:

параметры стимулов (через test_metadata);

признаки локализации и типа предъявления.

9.5. Базовые аналитические агрегаты

На основе clean_trials рассчитываются следующие показатели для каждого теста и каждой сессии:

9.5.1. Количественные характеристики

число валидных попыток;

медиана RT;

среднее RT;

межквартильный размах;

MAD (median absolute deviation).

9.5.2. Пороговые показатели

доля RT, превышающих заданный порог (например, 800 мс);

минимальные и максимальные значения RT (после очистки).

9.5.3. Показатели качества выполнения

суммарное число пропусков;

суммарное число преждевременных реакций;

отношение числа пропусков к числу валидных попыток.

⚠️ Эти показатели не интерпретируются как временные характеристики, а используются исключительно как контекст выполнения теста.

9.6. Ограничения агрегатного анализа

При интерпретации агрегатов необходимо учитывать:

отсутствие информации о порядке пропусков;

невозможность оценки «истинной длины» серии;

невозможность восстановления динамики реакции внутри теста при наличии пропусков.

Допустимые сценарии анализа:

агрегатный анализ RT;

анализ распределений;

сравнение условий при сопоставимом числе пропусков.

Ограниченные сценарии:

анализ последовательности попыток;

анализ трендов внутри серии при большом числе пропусков.

10. Канальная и латерализационная классификация

Данный раздел описывает принципы аналитической классификации результатов тестирования, используемые для группировки и сопоставления значений RT.
Классификация вводится постфактум, на уровне анализа, и не является прямым отражением физиологических измерений.

10.1. Общие положения

Канальная и латерализационная классификация:

не основана на прямом измерении активности зрительных путей;

использует известные свойства визуальных стимулов и условий предъявления;

применяется исключительно для аналитической группировки данных.

Важно:

классификация не претендует на изоляцию отдельных зрительных трактов;

результаты интерпретируются как функциональные корреляты, а не как прямые физиологические маркеры.

10.2. Латерализация

Латерализация определяется положением стимула в поле зрения относительно центральной линии.

Используются следующие категории:

Left — стимул предъявлялся в левом поле зрения;

Center — стимул предъявлялся в центральной зоне;

Right — стимул предъявлялся в правом поле зрения.

Источник информации:

параметры локализации стимула, зафиксированные в данных тестирования;

метаданные теста.

Латерализация применяется для:

внутриличностного сравнения;

анализа асимметрий реакции;

сопоставления условий при одинаковой структуре теста.

10.3. Канальная группировка

Канальная классификация основана на типе предъявляемого стимула, а не на прямом измерении активности каналов.

Используются следующие аналитические группы:

P (parvo-oriented) — условия, предполагающие преимущественную нагрузку на парво-ориентированные механизмы
(стационарные, высококонтрастные, цветовые стимулы);

K (konio-oriented) — условия, связанные с цветовой компонентой и изменёнными спектральными характеристиками;

M (magno-oriented) — условия, связанные с движением стимула (Tst3).

⚠️ Данные обозначения используются исключительно как аналитические ярлыки и не означают изолированного возбуждения соответствующих трактов.

10.4. Связь классификации с тестами

Соответствие тестов аналитическим группам:

Tst1
— преимущественно P-ориентированная нагрузка;

Tst2 (red)
— P/K-ориентированная нагрузка с выраженной цветовой компонентой;

Tst3 (shift / movement)
— M-ориентированная нагрузка.

Это соответствие используется:

для группировки результатов;

для сопоставления реакций в разных условиях;

для построения регрессионных и сравнительных моделей.

10.5. Ограничения канальной и латерализационной интерпретации

Принципиальные ограничения:

невозможна количественная оценка вклада отдельных трактов;

невозможна проверка селективности каналов на уровне одного теста;

классификация не учитывает индивидуальные особенности зрительной системы.

Следствие:

интерпретация результатов всегда вероятностная;

выводы формулируются в терминах направленности изменений, а не жёсткой локализации.

10.6. Использование классификации в анализе

Канальная и латерализационная классификация применяется:

при расчёте агрегатов;

при сравнении условий внутри одной сессии;

при лонгитюдинном анализе;

при формировании логических правил интерпретации.

Классификация не используется:

как самостоятельный диагностический критерий;

как основание для прямых физиологических выводов.


11. Агрегаты, статистические показатели и правила интерпретации

Данный раздел определяет набор допустимых агрегатов и статистических показателей, а также правила их интерпретации при анализе данных тестирования скоростей зрительных реакций.

Все показатели рассчитываются исключительно на финальных значениях RT, с учётом агрегированных счётчиков пропусков и преждевременных реакций.

11.1. Общие принципы агрегирования

При расчёте агрегатов принимаются следующие принципы:

анализ ведётся внутри одного пациента и внутри одной сессии;

межиндивидуальные сравнения допустимы только на уровне направленности эффектов, а не абсолютных значений;

распределения RT не предполагаются нормальными;

предпочтение отдаётся устойчивым непараметрическим оценкам;

счётчики пропусков и преждевременных реакций используются как контекст выполнения, а не как прямые временные метрики.

11.2. Базовые статистические показатели RT

Для каждого теста (и при необходимости — для каждой латерализационной/канальной группы) рассчитываются:

медиана RT — основной показатель центральной тенденции;

среднее RT — вспомогательный показатель, используемый с осторожностью;

минимальное и максимальное RT — после исключения недопустимых значений;

межквартильный размах (IQR) — мера разброса;

MAD (median absolute deviation) — предпочтительная мера вариабельности.

MAD используется как основной устойчивый показатель разброса и может применяться:

для описания вариабельности;

для маркировки экстремальных значений (без удаления данных задним числом).

11.3. Пороговые и частотные показатели

Дополнительно рассчитываются показатели, характеризующие распределение RT:

доля значений RT, превышающих заданный порог (например, 800 мс);

доля значений RT ниже заданного порога (при необходимости);

количество валидных попыток в тесте.

Пороговые значения используются только как аналитические ориентиры и не интерпретируются как диагностические границы.

11.4. Показатели качества выполнения теста

К показателям качества выполнения относятся:

число пропусков в тесте;

число преждевременных реакций в тесте;

отношение числа пропусков к числу валидных попыток;

отношение числа преждевременных реакций к числу валидных попыток.

Эти показатели:

не имеют временной структуры;

не позволяют судить о позиции ошибок в серии;

используются исключительно как контекстные характеристики надёжности выполнения теста.

11.5. Сравнительный анализ условий

Допустимые формы сравнительного анализа:

сравнение медиан RT между тестами (Tst1 vs Tst2 vs Tst3);

сравнение латерализационных условий (Left / Center / Right);

сравнение канальных групп (P / K / M) в рамках одной сессии.

Ограничения:

сравнения корректны только при сопоставимом числе валидных попыток;

при существенных различиях по числу пропусков результаты требуют осторожной интерпретации;

прямое сравнение распределений при большом числе пропусков методологически ограничено.

11.6. Лонгитюдинный анализ

При наличии нескольких сессий одного пациента допускается лонгитюдинный анализ:

сравнение агрегатов между сессиями;

анализ направленности изменений медианы RT и MAD;

сопоставление изменений в разных тестах и канальных группах.

Ограничения лонгитюдинного анализа:

невозможна нормализация на «исходный уровень» при нестабильных данных;

изменения интерпретируются качественно, а не как точные количественные сдвиги;

обязательен учёт изменений в числе пропусков и преждевременных реакций.

11.7. Правила интерпретации результатов

При интерпретации агрегатов необходимо соблюдать следующие правила:

не интерпретировать единичные экстремальные значения без учёта распределения;

не делать выводов о физиологических механизмах без опоры на несколько согласованных показателей;

рассматривать счётчики пропусков и преждевременных реакций как модификаторы доверия, а не как самостоятельные признаки;

избегать терминов, не имеющих строгого количественного определения.

Результаты формулируются в терминах:

направленности изменений;

относительных различий между условиями;

согласованности или рассогласованности показателей.


12. Контроль качества данных (QC) и проверки согласованности

Данный раздел описывает допустимые процедуры контроля качества данных, применимые к результатам тестирования скоростей зрительных реакций с учётом фактической структуры хранения данных.

Контроль качества направлен на:

выявление технических и методических артефактов;

оценку надёжности выполнения тестов;

ограничение интерпретаций в случаях недостаточного качества данных.

QC не предназначен для «очистки» данных задним числом и не восстанавливает утраченную информацию.

12.1. Проверка целостности данных

На первом этапе выполняются проверки целостности:

наличие обязательных идентификаторов:

patient_id,

session_id,

test_type;

отсутствие дублирующих записей для одной и той же комбинации
пациент – сессия – тест – попытка;

корректность типов данных (числовые значения RT, счётчики — целые числа);

отсутствие отрицательных значений RT.

Записи, нарушающие эти требования, подлежат отдельному разбору и не используются в аналитических агрегатах.

12.2. Проверка диапазонов и допустимых значений

Проверяются следующие условия:

RT находится в физиологически допустимом диапазоне;

значения RT не выходят за пределы, определённые параметрами тестирования;

счётчики пропусков и преждевременных реакций:

не отрицательны;

не превышают максимально возможного числа попыток в тесте.

Данные проверки направлены на выявление:

ошибок экспорта;

сбоев регистрации;

некорректного сопоставления форматов данных.

12.3. Проверка согласованности агрегатов

Для каждого теста и сессии выполняются проверки:

число валидных значений RT соответствует ожидаемому диапазону;

суммарное число:

валидных попыток,

пропусков,

преждевременных реакций
не противоречит структуре теста;

отсутствие логических конфликтов
(например, большое число пропусков при нормальном числе валидных RT без объяснимой причины).

Цель этих проверок — выявление несогласованных наборов данных, а не их автоматическое исключение.

12.4. Анализ распределений RT

Для контроля качества используются описательные методы:

визуальный анализ распределений RT (гистограммы, boxplot);

проверка наличия:

выраженных выбросов,

мультимодальности,

атипичной асимметрии.

Важно:

форма распределения не используется как диагностический признак;

распределения анализируются внутри одного пациента и одной сессии;

при малом числе попыток любые выводы по форме распределения ограничены.

12.5. Использование счётчиков пропусков и преждевременных реакций в QC

Счётчики пропусков и преждевременных реакций применяются:

как индикаторы сложности выполнения теста;

как маркеры потенциального снижения надёжности результатов;

для стратификации данных по уровню качества.

Ограничения:

счётчики не позволяют определить позицию ошибок;

счётчики не используются для автоматического исключения отдельных RT;

пороговые значения счётчиков не являются универсальными и требуют контекстной интерпретации.

12.6. Критерии исключения данных

Исключение данных из анализа допускается только в следующих случаях:

нарушение целостности структуры данных;

очевидные технические ошибки регистрации;

невозможность интерпретации результатов из-за критически низкого числа валидных попыток.

Исключение данных:

фиксируется явно;

сопровождается указанием причины;

не выполняется автоматически на основе одного показателя.

12.7. Ограничения процедур QC

Контроль качества не позволяет:

восстановить историю повторов;

определить причины пропусков или преждевременных реакций;

корректировать данные задним числом;

превращать агрегированные показатели в временные ряды.

QC служит инструментом оценки надёжности, а не средством «улучшения» данных.


13. Форматы итоговых выгрузок и практический аналитический чек-лист

Данный раздел фиксирует допустимые форматы выходных данных и последовательность аналитических шагов, обеспечивающих воспроизводимость и методическую корректность результатов.

Выгрузки формируются после завершения QC и не содержат промежуточных артефактов тестирования.

13.1. Общие принципы формирования выгрузок

При формировании итоговых данных принимаются следующие принципы:

выгрузки основаны исключительно на финальных значениях RT;

отсутствуют записи о повторных попытках;

счётчики пропусков и преждевременных реакций включаются только в агрегированном виде;

формат выгрузок должен позволять:

повторный анализ,

сопоставление с предыдущими сессиями,

интеграцию в последующие аналитические модули.

13.2. Выгрузка уровня попыток (trial_level_clean.csv)
Назначение

Файл предназначен для:

статистического анализа распределений RT;

построения графиков;

вторичной аналитики.

Структура (типовой набор полей)

patient_id

session_id

test_type

trial_index

RT_ms

lateralization (Left / Center / Right)

channel_group (P / K / M)

missed_count

premature_count

Особенности

каждая строка соответствует одной валидной финальной попытке;

отсутствуют временные ряды повторов;

файл не предназначен для реконструкции хода тестирования.

13.3. Выгрузка уровня теста (test_summary.csv)
Назначение

Файл предназначен для:

компактного представления результатов теста;

лонгитюдинного анализа;

клинического и исследовательского обзора.

Структура (типовой набор полей)

patient_id

session_id

test_type

median_RT

mean_RT

MAD_RT

valid_trials_count

missed_count

premature_count

Особенности

агрегаты рассчитаны в пределах одного теста;

счётчики используются как контекст выполнения;

файл является основным источником для сравнительного анализа.

13.4. Выгрузка уровня пациента (patient_summary.csv)
Назначение

Файл предназначен для:

обзора состояния пациента в рамках одной или нескольких сессий;

сопоставления тестов между собой;

интеграции в отчётные формы.

Структура (пример)

patient_id

session_id

агрегированные показатели по каждому тесту:

медиана RT,

MAD,

число валидных попыток,

число пропусков,

число преждевременных реакций.

13.5. Ограничения итоговых выгрузок

Итоговые выгрузки не содержат:

истории повторов;

причин пропусков и преждевременных реакций;

временной последовательности попыток;

сведений о субъективном состоянии пациента.

Любые интерпретации выполняются в пределах этих ограничений.

14. Практический аналитический чек-лист

Данный чек-лист фиксирует рекомендуемую последовательность действий при работе с данными тестирования СЗР.

14.1. Подготовка данных

Проверка структуры данных и идентификаторов.

Проверка диапазонов RT и счётчиков.

Формирование представления clean_trials.

14.2. Контроль качества (QC)

Анализ числа валидных попыток.

Оценка числа пропусков и преждевременных реакций.

Визуальный контроль распределений RT.

Фиксация ограничений интерпретации.

14.3. Расчёт агрегатов

Расчёт медианы RT и MAD.

Расчёт дополнительных показателей (IQR, пороговые доли).

Формирование агрегированных выгрузок.

14.4. Сравнительный анализ

Сравнение тестов внутри сессии.

Анализ латерализационных и канальных групп.

Лонгитюдинное сравнение сессий (при наличии).

14.5. Интерпретация

Формулировка выводов в терминах направленности изменений.

Учёт контекста выполнения тестов.

Исключение выводов, не поддерживаемых данными.


15. Статус документа и принципы его развития

Настоящий документ имеет статус living specification и является единственным эталонным источником методических, структурных и аналитических положений проекта NeuroTransAnalytics.

15.1. Назначение README.md как reference-спецификации

README.md используется для:

фиксации реально используемой методологии тестирования и анализа;

описания фактической структуры данных и допустимых преобразований;

определения границ интерпретации результатов;

обеспечения воспроизводимости аналитических процедур.

Документ не является:

пользовательской инструкцией;

рекламным описанием проекта;

обзором гипотез без формализации.

15.2. Принцип приоритета данных над интерпретациями

Любые изменения или дополнения документа должны удовлетворять следующему принципу:

Если положение не поддерживается фактическими данными или логикой их получения, оно не включается в спецификацию.

Следствия:

запрещено приписывать данным информацию, отсутствующую в структуре хранения;

запрещено реконструировать утраченные параметры тестирования;

запрещено вводить показатели, не имеющие чёткой операционализации.

15.3. Правила внесения изменений

Изменения в README.md допускаются только при выполнении одного из условий:

Изменился процесс тестирования
(добавлены тесты, параметры, процедуры регистрации).

Изменена структура данных
(новые поля, новые таблицы, новые форматы хранения).

Добавлены формально определённые аналитические процедуры,
не противоречащие существующим ограничениям.

Каждое изменение должно:

быть явно сформулировано;

не нарушать ранее зафиксированные ограничения;

сохранять обратную совместимость интерпретаций, если это возможно.

15.4. Отношение README.md к коду и SQL

код и SQL-скрипты подчиняются положениям README.md;

при расхождении между реализацией и спецификацией:

ошибка считается находящейся в реализации;

спецификация имеет приоритет;

любые изменения логики обработки данных сначала отражаются в README.md, и только затем — в коде.

15.5. Границы применимости документа

Данный документ:

описывает конкретный вариант тестирования СЗР, реализованный исторически;

не претендует на универсальность для других методик;

не переносится автоматически на иные экспериментальные протоколы.

Использование документа вне этого контекста требует отдельной формализации.

### Границы текущего массива данных

В текущем массиве данных отсутствуют:
- результаты теппинг-тестов (моторная коррекция реакции);
- тестирование синего цвета как отдельного протокола;
- нагрузочные или когнитивно-модифицированные версии тестов;
- сохранённые «сырые» временные ряды повторных попыток.

Все перечисленные направления рассматриваются как возможные расширения системы и не используются в текущем анализе и интерпретации.

15.6. Заключительная фиксация

В текущей версии README.md:

согласованы:

методика тестирования,

структура данных,

аналитические процедуры,

ограничения интерпретации;

исключены:

методически неоформленные показатели,

реконструкции утраченных данных,

некорректные физиологические выводы;

обеспечена основа для:

воспроизводимого анализа,

дальнейшей автоматизации,

расширения проекта без потери методологической целостности.


