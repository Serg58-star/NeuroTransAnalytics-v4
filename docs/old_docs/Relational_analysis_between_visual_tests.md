# Relational_analysis_between_visual_tests.md

## Логическая спецификация сравнительного анализа между зрительными тестами

---

## 1. Назначение документа

Настоящий документ описывает **уровень сравнительного (relational) анализа**
между результатами различных зрительных тестов (Tst1, Tst2, Tst3),
проводимых в рамках одной сессии тестирования скоростей зрительных реакций.

Сравнительный анализ предназначен для:

- оценки **взаимодействия функциональных подсистем** зрительной системы;
- выявления **согласованных и рассогласованных изменений** между тестами;
- построения функциональных маркеров состояния системы
  без смешения данных и интерпретаций.

---

## 2. Место сравнительного анализа в архитектуре

Полная логическая цепочка:
raw data (boxbase)
↓
ETL → visual_tests
↓
QC
↓
Aggregates (Tst1, Tst2, Tst3 отдельно)
↓
Relational Analysis ← (настоящий документ)
↓
Interpretation / hypotheses


Сравнительный анализ:

- **не является агрегированием**;
- **не заменяет агрегаты**;
- работает исключительно **поверх уже рассчитанных агрегатов**.

---

## 3. Объект сравнительного анализа

Единицей сравнительного анализа является:

> **одна сессия одного пациента**,  
> представленная набором агрегатов по тестам Tst1, Tst2, Tst3.

Сравнение **между пациентами** не является задачей данного уровня.

---

## 4. Типы допустимых сравнительных конструкций

### 4.1. Разностные показатели (Δ)

Разностные показатели отражают **изменение реакции при переходе
между условиями тестирования**.

Примеры:

- `Δ_color = median_rt_Tst2 – median_rt_Tst1`
- `Δ_motion = median_rt_Tst3 – median_rt_Tst1`
- `Δ_color_motion = median_rt_Tst2 – median_rt_Tst3`

Принцип:
- используются агрегаты **одного типа** (например, медианы);
- расчёт выполняется **внутри одной сессии**.

---

### 4.2. Контрастные соотношения

Контрастные показатели отражают **относительное соотношение эффектов**.

Примеры:

- `(median_rt_Tst2 – median_rt_Tst1) / median_rt_Tst1`
- `(median_rt_Tst3 – median_rt_Tst1) / median_rt_Tst1`

Используются:
- для нормализации на индивидуальный уровень реакции;
- для внутриличностных сопоставлений в динамике.

---

### 4.3. Согласованность / рассогласованность изменений

Анализируется:

- совпадение направлений изменений;
- расхождение направлений изменений;
- относительная величина изменений.

Примеры формулировок:
- «ускорение в Tst1 и замедление в Tst2»;
- «однородное замедление во всех тестах»;
- «избирательное изменение Tst3 при стабильности Tst1».

---

## 5. Связь с латерализацией и канальными группами

Сравнительный анализ может выполняться:

- по агрегатам **всего теста**;
- по латерализационным агрегатам (Left / Center / Right);
- по функциональным канальным группам (P, P/K, M).

⚠️ Важно:
- сравнение выполняется **на одном уровне детализации**;
- не допускается смешение «общих» и «латерализационных» агрегатов в одном Δ.

---

## 6. Методологический статус ΔV4 и ΔV5/MT

### Ключевое положение

ΔV4, ΔV5/MT и аналогичные показатели:

- **не являются измерениями активности корковых зон**;
- **не являются прямыми физиологическими маркерами**;
- представляют собой **аналитические конструкты**,
  основанные на сравнении функциональных реакций
  при разных условиях тестирования.

Корректная формулировка:

> ΔV4 и ΔV5/MT — это функциональные индикаторы
> рассогласования или избирательности реакции,
> выявляемые через сравнительный анализ агрегатов.

---

## 7. Условия валидности сравнительного анализа

Сравнительный анализ допустим только при выполнении условий:

- все сравниваемые агрегаты имеют статус `QC_OK` или `QC_LIMITED`;
- число валидных RT в тестах сопоставимо;
- отсутствуют грубые различия по числу пропусков,
  делающие сравнение методически сомнительным.

При нарушении условий:
- результат маркируется как **ограниченно интерпретируемый**.

---

## 8. Что сравнительный анализ принципиально НЕ делает

Сравнительный анализ:

- не объединяет тесты в один агрегат;
- не корректирует значения агрегатов;
- не устраняет вариабельность;
- не подменяет собой агрегирование или QC;
- не делает клинических или нейроанатомических утверждений.

---

## 9. Хранение результатов сравнительного анализа

Результаты могут:

- рассчитываться on-the-fly;
- или сохраняться в аналитическом слое
  (например, `relational_analysis` или `longitudinal_analysis`).

Каждая запись должна содержать:
- ссылки на исходные агрегаты;
- тип сравнительного показателя;
- значение;
- контекст тестирования.

---

## 10. Интерпретация результатов

Интерпретация сравнительного анализа:

- всегда **внутриличностная**;
- формулируется в терминах:
  - направленности,
  - относительных различий,
  - согласованности реакций;
- не использует терминов,
  не имеющих операционального определения.

---

## 11. Статус документа

Настоящий документ:

- является нормативной спецификацией уровня сравнительного анализа;
- не заменяет и не модифицирует предыдущие слои;
- обязателен для любых интерпретаций,
  использующих несколько тестов одновременно.

Изменения допускаются только при:
- добавлении новых тестов;
- изменении методики тестирования;
- пересмотре логики агрегирования.

---

## Контрольная фиксация

После утверждения данного документа:

- архитектура анализа СЗР становится логически замкнутой;
- комплексное чередующееся тестирование
  получает формализованный аналитический слой;
- ΔV4, ΔV5/MT и аналогичные показатели
  имеют строго определённый методологический статус.




