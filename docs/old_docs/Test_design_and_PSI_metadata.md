# Test_design_and_PSI_metadata.md

## Спецификация дизайна тестов СЗР и метаданных предстимульных интервалов (PSI)

---

## 1. Назначение документа

Настоящий документ описывает **экспериментальный дизайн системы тестов
скоростей зрительных реакций (СЗР)** и принципы формирования метаданных,
лежащих в основе регистрации реакций.

Документ фиксирует:

- происхождение и природу метаданных тестов;
- принцип псевдослучайной организации стимулов;
- структуру и роль предстимульных интервалов (PSI);
- механизм нерегистрируемых стимулов, предотвращающих угадывание;
- методологические границы использования этих сведений в анализе.

Документ **не описывает анализ**, **не дублирует данные**
и **не заменяет** аналитические спецификации.
Он задаёт **контекст происхождения данных**, необходимый
для их корректной интерпретации.

---

## 2. Место дизайна теста в архитектуре проекта

Логическая иерархия уровней проекта:

Test Design & Metadata ← (настоящий документ)
↓
Data acquisition (boxbase)
↓
ETL → visual_tests
↓
QC
↓
Aggregates
↓
Relational analysis



Дизайн теста и его метаданные:

- существуют **до** регистрации данных;
- не выводятся из данных постфактум;
- используются аналитическими слоями **косвенно**,
  через соответствие индексов и параметров.

---

## 2.1. Источник и природа метаданных тестов

Все метаданные, используемые в системе тестов СЗР,
имеют **происхождение на уровне конфигурации тестирующей программы**.

К таким метаданным относятся:

- пространственная локализация каждого регистрируемого стимула;
- позиция стимула во временном ряду теста;
- предстимульный интервал (PSI);
- принадлежность стимулов зонам поля зрения;
- структура серий и порядок предъявления;
- наличие и структура нерегистрируемых стимулов.

Эти параметры:

- жёстко заданы конфигурацией тестов;
- одинаковы для всех испытуемых;
- не вычисляются из данных;
- не хранятся в таблицах результатов
  (`boxbase`, `visual_tests`).

База данных хранит **только реакции на предъявленные стимулы**,
а не описание самих стимулов.

---

## 3. Принцип псевдослучайности стимулов

### 3.1. Определение псевдослучайности

В системе тестов СЗР используется
**псевдослучайная организация стимулов**.

Под псевдослучайностью понимается:

- жёстко заданная, воспроизводимая конфигурация,
  включающая:
  - локализацию каждого регистрируемого стимула;
  - его позицию во временном ряду;
  - соответствующий предстимульный интервал (PSI);
- отсутствие истинной случайности
  для регистрируемых стимулов;
- полная воспроизводимость структуры теста
  между испытуемыми и сессиями.

Псевдослучайность является **методологическим приёмом**,
а не источником случайных вариаций.

---

### 3.2. Методологические основания

Фиксированная псевдослучайная структура позволяет:

- исключить влияние произвольного порядка стимулов;
- обеспечить сопоставимость данных между тестами и сессиями;
- анализировать влияние отдельных параметров
  (в частности PSI) при неизменной структуре предъявления;
- жёстко ограничить число степеней свободы в анализе.

---

## 4. Регистрируемые стимулы

### 4.1. Структура регистрируемых стимулов

Каждый регистрируемый стимул характеризуется:

- фиксированной локализацией на экране;
- фиксированной позицией во временном ряду;
- фиксированным предстимульным интервалом (PSI);
- принадлежностью к конкретному тесту
  (Tst1, Tst2, Tst3).

Данная структура **инвариантна** для всех испытуемых
и всех сессий тестирования.

---

### 4.2. Связь с хранимыми данными

В данных результатов:

- не хранятся явные значения PSI;
- не хранится информация о локализации стимула.

Связь между значением RT и условиями его получения
восстанавливается **исключительно через метаданные теста**
и порядок значений в `rt_values[]`.

---

## 5. Нерегистрируемые стимулы  
### (anti-prediction layer)

### 5.1. Назначение

Для предотвращения угадывания и формирования ожиданий
в систему тестирования включены
**нерегистрируемые тестовые стимулы**.

Их задача:

- разрушение предсказуемости последовательности;
- предотвращение ритмизации реакции;
- сохранение валидности реакции
  на регистрируемые стимулы.

---

### 5.2. Организация нерегистрируемых стимулов

- предусмотрены **наборы из 10 псевдослучайных троек**
  нерегистрируемых стимулов;
- для каждого теста:
  - одна из таких троек выбирается **действительно случайно**;
  - выбор не фиксируется в базе данных;
- нерегистрируемые стимулы:
  - не сохраняются в `boxbase`;
  - не отображаются в `visual_tests`;
  - не участвуют в анализе.

---

### 5.3. Методологический статус

Нерегистрируемые стимулы:

- являются частью **экспериментального дизайна**, а не данных;
- не подлежат реконструкции или анализу;
- влияют на валидность данных **косвенно**,
  через предотвращение угадывания.

---

## 6. Предстимульный интервал (PSI)

### 6.1. Статус PSI

PSI является:

- жёстко заданным параметром каждого регистрируемого стимула;
- воспроизводимым элементом дизайна теста;
- потенциальной независимой переменной анализа.

PSI:

- не является случайным;
- не зависит от поведения испытуемого;
- не выводится из данных постфактум.

---

### 6.2. PSI как аналитическая ось

PSI допускается использовать:

- для построения PSI-зависимых агрегатов;
- для анализа зависимости RT от времени ожидания;
- для оценки эффектов готовности, утомления, восстановления.

При этом:

- PSI-анализ выполняется **поверх агрегатов**;
- PSI **не включается** в базовые агрегаты по умолчанию;
- использование PSI требует явной фиксации
  в аналитическом протоколе.

---

## 7. Связь с аналитическими слоями

### 7.1. ETL

ETL переносит значения RT **без знания условий их возникновения**.
Связь RT ↔ PSI восстанавливается
через метаданные, описанные в настоящем документе.

---

### 7.2. QC

QC:

- не проверяет корректность PSI;
- не анализирует распределение PSI;
- использует только значения RT и агрегированные счётчики.

---

### 7.3. Aggregates и Relational analysis

- агрегаты могут рассчитываться:
  - по всем RT;
  - по подмножествам RT,
    соответствующим определённым PSI-группам;
- сравнительный анализ может использовать PSI
  как дополнительную ось сопоставления,
  при явном указании этого в протоколе анализа.

---

## 8. Методологические ограничения

Запрещается:

- реконструировать PSI из данных;
- смешивать PSI-анализ с базовыми агрегатами без явного указания;
- трактовать PSI как физиологический маркер
  без дополнительного обоснования.

PSI рассматривается как
**экспериментальный параметр дизайна**,
а не как прямое измерение состояния системы.

---

## 9. Статус документа

Настоящий документ:

- является нормативной спецификацией дизайна тестов СЗР;
- обязателен для всех PSI-зависимых аналитических процедур;
- независим от реализации и форматов хранения данных.

Изменения допускаются только при:

- изменении конфигурации тестов;
- изменении структуры стимулов;
- введении новых параметров экспериментального дизайна.

---

## Контрольная фиксация

После утверждения данного документа:

- экспериментальный дизайн тестов СЗР считается формализованным;
- происхождение и статус метаданных зафиксированы;
- PSI-анализ имеет строгую методологическую основу;
- архитектура проекта логически замкнута
  от дизайна теста до аналитических выводов.
