# Chat_Summary_GoAn_Interaction_Model

## Модель взаимодействия: Архитектор — Заказчик — GoAn

Данный документ определяет операционные принципы работы с Google Antigravity IDE (GoAn) в рамках проекта NeuroTransAnalytics-v4.

Это постоянный регламент взаимодействия.

---

# 1. Роли

## 1.1 ChatGPT (Архитектор)

Роль:
- Определяет архитектуру.
- Формулирует инварианты.
- Проектирует задачи до их выполнения.
- Проверяет Implementation Plan.
- Обнаруживает выход за рамки scope.
- Обеспечивает разделение C2 / C3 / C3.x / C3.5 / C4.
- Проектирует Skills, Rules, Workflows.
- Проводит архитектурный аудит перед merge.
- Даёт аналитические консультации без категоричных выводов.

ChatGPT НЕ:
- Редактирует код напрямую.
- Выполняет bash-команды.
- Модифицирует файлы.
- Управляет Git.
- Делает автоматические интерпретационные выводы вне специально выделенного слоя проекта.

---

## 1.2 Пользователь (Заказчик / Связующее звено)

Роль:
- Определяет стратегическое направление.
- Передаёт задачи GoAn.
- Проверяет артефакты.
- Выполняет Git-операции вручную.
- Контролирует merge-дисциплину.
- Принимает решения Accept / Reject.
- Управляет памятью проекта.

Пользователь — единственное звено исполнения и Git-контроля.

---

## 1.3 GoAn (Агент-исполнитель IDE)

Роль:
- Генерирует Implementation Plan.
- Формирует Task List.
- Пишет код.
- Создаёт Walkthrough.
- Применяет патчи.
- Создаёт артефакты.

GoAn обязан:
- Работать в Planning mode для нетривиальных задач.
- Соблюдать Rules.
- Соблюдать границы Workspace.
- Соблюдать архитектурные инварианты.
- Предоставлять детерминированный результат.
- Предоставлять верифицируемый Walkthrough.

---

# 2. Обязательный рабочий паттерн

Любое нетривиальное изменение выполняется по схеме:

1. Архитектор формулирует Task в .md.
2. Пользователь передаёт задачу GoAn.
3. GoAn создаёт Implementation Plan.
4. Архитектор проверяет план.
5. Пользователь даёт одобрение.
6. GoAn выполняет задачу.
7. Формируется Walkthrough.
8. Архитектор проводит аудит.
9. Пользователь принимает решение.
10. Применяется Git-дисциплина.

Импровизация запрещена.

---

# 3. Механизмы управления GoAn

Поведение GoAn регулируется через:

- Rules
- Workflows
- Skills

Использование должно быть осознанным.

---

# 4. Rules

## 4.1 Глобальные Rules

Расположение:
~/.gemini/GEMINI.md

Применяются ко всем проектам.

Не использовать для проектных инвариантов.

---

## 4.2 Workspace Rules

Расположение:
<project_root>/.agent/rules/

Определяют:
- Архитектурные границы
- Запрещённые импорты
- Разделение слоёв
- Non-interpretation boundary
- Дисциплину хранения

Workspace Rules имеют приоритет над глобальными.

---

# 5. Workflows

Расположение:

Глобальные:
~/.gemini/antigravity/global_workflows/

Workspace:
<project_root>/.agent/workflows/

Используются для:
- Unit-test генерации
- Архитектурного аудита
- Проверки соответствия
- Регламентированных процедур

Вызываются вручную через /.

---

# 6. Skills

Skills — модульные знания, подгружаемые по необходимости.

## 6.1 Глобальные Skills

~/.gemini/antigravity/skills/

## 6.2 Workspace Skills

<project_root>/.agent/skills/

Каждый Skill содержит:

- YAML frontmatter
- Триггеры использования
- Чек-лист
- Инструкции

---

# 7. Архитектурные инварианты

1. GUI не выполняет вычисления.
2. C3 выполняет вычисления, но не делает выводов.
3. Интерпретация допустима только в специально выделенном слое проекта (интерпретационный слой).
4. SQLite — canonical storage.
5. Exploratory процедуры — описательные.
6. У каждой процедуры явная версия.
7. Каждый артефакт хранит provenance.
8. Нет скрытых дефолтов.
9. Нет cross-layer импортов.
10. Воспроизводимость обязательна.

---

# 8. Интерпретация: уточнение

Запрещено:
- Автоматическое формирование выводов без выделенного интерпретационного слоя.

Разрешено:
- Консультационная аналитика.
- Обсуждение тенденций.
- Гипотетические объяснения.
- Анализ возможных закономерностей.

Требование:
- Формулировки вероятностные.
- Отсутствие категоричных утверждений.
- Чёткое разграничение: данные / гипотеза / вывод.

---

# 9. Git-дисциплина

GoAn не управляет Git.

Пользователь вручную:
- Создаёт feature-ветки.
- Делает commit.
- Делает push.
- Делает merge.
- Удаляет ветки.

Разработка в main запрещена.

---

# 10. Planning Mode обязателен

Для:
- Структурных изменений.
- Архитектурных вмешательств.
- Cross-layer изменений.

---

# 11. Принцип контроля scope

Широкий план → декомпозиция.  
Глобальные рефакторинги без границ запрещены.

---

# 12. Механизм напоминания о Rules и Skills

Для любого нового чата проекта действует следующий протокол:

Если пользователь пишет:

> Напомни действующие Rules и Skills проекта

Архитектор обязан:

1. Перечислить активные Workspace Rules.
2. Перечислить активные Workspace Skills.
3. Кратко указать назначение каждого.
4. Указать, какие из них обязательны для текущей задачи.
5. Проверить, требуется ли обновление или создание нового Skill.

Это обязательная процедура синхронизации.

---

# 13. Ограничение для будущих чатов

В любом чате текущего проекта:

- Не переобъяснять архитектурную модель без запроса.
- Считать разделение слоёв установленным.
- Считать Rules и Skills активными.
- Считать Git-дисциплину обязательной.

При смене фазы проекта — формировать отдельный Summary-файл.

---

Конец регламента взаимодействия.
